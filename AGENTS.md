# HU 🀄 - Project Reference

> Roguelike 麻将 deck-builder (Balatro-inspired)
> **实现时必须严格参照此文档**

## 📁 设计文档位置

详细设计在 `design/` 目录：
- `01-神牌设计.md` - 神牌系统完整设计
- `02-花牌设计.md` - 花牌系统完整设计
- `03-季节牌设计.md` - 季节牌系统完整设计
- `04-经济系统设计.md` - 经济系统完整设计

---

## 🎮 核心玩法规则

### 基础规则
- **起手牌**: 14 张
- **弃牌次数**: 5 次
- **出牌**: 不限次数，可连续出
- **胡牌条件**: 4面子 + 1对子（标准14张）

### 出牌获得
| 出牌类型 | 倍率 | 花牌选择 | 季节牌 |
|----------|------|----------|--------|
| 吃（顺子） | ×1.0 | 2选1 | 无 |
| 碰（刻子） | ×1.0 | 3选1 | 无 |
| 杠（四张） | ×3.0 | 4选1 | +1张 |

### 特殊规则
- 没胡牌也给**屁胡基础分** (50分)
- 杠有倍率 ×3

---

## 🃏 牌系统概览

### 神牌（被动效果，永久生效）
- **获取**: 商店购买
- **上限**: 最多持有 7 张
- **稀有度**: ⚪白 > 🟢绿 > 🔵蓝 > 🟣紫 > 🟡金

### 羁绊系统（神牌）
| 羁绊 | 主题 | 3张效果 | 5张效果 |
|------|------|---------|---------|
| 💰 财运 | 金币获取 | 金币+1 | 金币翻倍 |
| ⚡ 连击 | 连续出牌 | 倍率+2 | 额外×3 |
| 👁️ 洞察 | 看牌/预知 | 看+2张 | 看整个牌库 |
| 🔄 转化 | 改变牌面 | 不消耗弃牌 | 免费转化3张/回合 |
| 🎴 花色 | 花色专精 | 清一色+×3 | 任意花色算专精 |
| 🔺 刻子 | 碰/杠增强 | 碰×2 | 杠×5 |
| 📶 顺子 | 吃/顺子增强 | 吃×1.5 | 连续3顺×10 |
| 🎲 赌博 | 概率/风险 | 概率+20% | 失败保底50% |

### 花牌（主动使用，一次性）
- **获取**: 吃/碰/杠时选择
- **分类**: 🌸梅(弃牌) | 🎋竹(摸牌) | 🌺兰(倍率) | 🏵️菊(转化)
- **稀有度**: 普通(50%) | 稀有(35%) | 史诗(15%)

### 季节牌（强力一次性）
- **获取**: 杠时额外获得
- **分类**: 🌱春(番型) | ☀️夏(材质) | 🍂秋(资源) | ❄️冬(牌库)

---

## 💰 经济系统

### 得分公式
```
最终得分 = 基础分 × 出牌倍率 × 番型倍率 × 成就倍率 × 材质加成
```

### 基础分
| 胡牌类型 | 基础分 |
|----------|--------|
| 屁胡（无番） | 50 |
| 正常胡牌 | 100 |

### 番型倍率
| 番型 | 倍率 |
|------|------|
| 屁胡 | ×1 |
| 平和 | ×1.5 |
| 断幺九 | ×2 |
| 混一色 | ×2.5 |
| 对对和 | ×3 |
| 七对 | ×4 |
| 清一色 | ×5 |
| 连七对 | ×10 |
| 豪华七对 | ×12 |
| 字一色 | ×15 |
| 国士无双 | ×20 |

### 成就倍率
| 成就 | 倍率 | 条件 |
|------|------|------|
| 天胡 | ×10 | 起手直接胡 |
| 地胡 | ×5 | 弃牌1次就胡 |
| 人胡 | ×2 | 弃牌2次就胡 |
| 杠上开花 | ×3 | 杠后摸牌胡 |
| 海底捞月 | ×2 | 最后1次出牌胡 |
| 速战速决 | ×2 | 2次出牌内胡 |
| 完美主义 | ×3 | 不用弃牌 |

### 材质系统
| 材质 | 效果 |
|------|------|
| 🥇 金牌 | 胡牌+3金币 |
| 🥈 银牌 | 出牌+1金币 |
| 🥉 铜牌 | 面子+0.5倍率 |
| 🔮 玻璃牌 | 面子×2，用后碎 |
| 🪨 石牌 | 无法被弃 |
| 🔥 火牌 | 销毁2张同花色 |
| ❄️ 冰牌 | 锁定，不可转化 |
| ✨ 幸运牌 | 30%概率翻倍 |
| 👻 幽灵牌 | 百搭 |

### 难度曲线（目标分数）
| 回合 | 目标 | 建议倍率 |
|------|------|----------|
| 1 | 300 | ×3 |
| 2 | 600 | ×6 |
| 3 | 1,200 | ×12 |
| 4 | 2,000 | ×20 |
| 5 | 3,500 | ×35 |
| 6 | 6,000 | ×60 |
| 7 | 10,000 | ×100 |
| 8 (Boss) | 20,000 | ×200 |

---

## 🏪 商店系统

### 神牌价格
| 稀有度 | 价格范围 |
|--------|----------|
| ⚪ 白神 | 3-7 |
| 🟢 绿神 | 8-15 |
| 🔵 蓝神 | 15-28 |
| 🟣 紫神 | 28-45 |
| 🟡 金神 | 50-80 |

---

## 🎯 实现注意事项

1. **保持14张**: 所有效果都不会让手牌超过或少于14张
2. **倍率正向**: 所有倍率 ≥1
3. **7张神牌上限**: 逼迫玩家做选择
4. **番型可叠加**: 清一色七对 = ×5 × ×4 = ×20
5. **Git规则**: 每次修改都要 commit & push
