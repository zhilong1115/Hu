# HU! 🀄 游戏设计文档

> **版本**: v4.0  
> **最后更新**: 2026-02-02  
> **状态**: 基础规则 + 神牌 + 材质 已确定

---

## 🎮 核心玩法

### 基础规则

| 规则 | 说明 |
|------|------|
| 起手牌 | **14 张** 麻将牌 |
| 弃牌次数 | **5 次**（弃牌后从牌堆摸等量牌） |
| 出牌次数 | **不限**（直到胡牌或放弃） |
| 胡牌条件 | 组成有效牌型（4面子+1对 或 特殊牌型） |
| 屁胡保底 | 没胡牌也给 **50 基础分** |

### 出牌系统

| 出牌类型 | 组成 | 倍率 | 获得金币 | 获得花牌 |
|----------|------|------|----------|----------|
| 吃（顺子） | 3张连续同花色 | ×1 | **+3💰** | 2选1 |
| 碰（刻子） | 3张相同 | ×1 | **+5💰** | 3选1 |
| 杠（四张） | 4张相同 | **×3** | **+10💰** | 5选1 + 季节牌 |

> 💡 杠牌额外获得1张当前季节的季节牌
> 💰 胡牌结算时，每次未使用的弃牌次数获得 **+5金币**

### 游戏流程

```
开局(摸14张) → 弃牌(最多5次) → 出牌(吃/碰/杠) → 胡牌(计算得分) → 商店(买神牌)
```

---

## 🏆 胡牌番型

| 番型 | 倍率 | 说明 |
|------|------|------|
| 屁胡 | ×1 | 基础胡牌，无特殊牌型 |
| 平和 | ×2 | 4个顺子 + 1对将（无刻子） |
| 断幺九 | ×3 | 没有1、9和字牌 |
| 混一色 | ×4 | 一种花色 + 字牌 |
| 对对和 | ×5 | 4个刻子 + 1对将（碰碰胡） |
| 七对 | ×6 | 7个对子 |
| 清一色 | ×8 | 只有一种花色（万/条/筒） |
| 连七对 | ×15 | 同花色连续7个对子 |
| 字一色 | ×20 | 全部是字牌 |
| 国士无双 | ×30 | 十三幺 |

> 💡 番型可叠加！清一色 + 对对和 = ×8 × ×5 = ×40

---

## 📊 经济系统

### 核心公式

```
最终得分 = 基础分 × 出牌倍率 × 番型倍率 × 成就倍率 × 羁绊加成
```

### 难度曲线（目标分数）

| 回合 | 目标分数 |
|------|----------|
| 1 | 500 |
| 2 | 1,200 |
| 3 | 2,500 |
| 4 | 5,000 |
| 5 | 10,000 |
| 6 | 20,000 |
| 7 | 40,000 |
| 8 | 80,000 |

---

## 🌟 神牌系统（已确定）

### 概述
- **获取方式**: 商店购买
- **效果类型**: 被动效果，永久生效
- **持有上限**: **7张**
- **羁绊系统**: 每张神牌属于一个羁绊，收集同羁绊触发 2/4/6 层效果

### 稀有度

| 稀有度 | 出现概率 | 商店价格 | 每羁绊数量 |
|--------|----------|----------|------------|
| 🟢 绿神 | 50% | 5-10 💰 | 3张 |
| 🔵 蓝神 | 30% | 15-22 💰 | 2张 |
| 🟣 紫神 | 15% | 30-40 💰 | 1-2张 |
| 🟡 金神 | 5% | 55-60 💰 | 1张 |

### 羁绊系统

#### 🎲 赌博羁绊 — 概率与风险

| 等级 | 名称 | 所需 | 效果 |
|------|------|------|------|
| Lv.1 | 赌侠 | 2张 | 所有概率效果 **+10%** |
| Lv.2 | 赌王 | 4张 | 概率失败时 **无负面效果** |
| Lv.3 | 赌神 | 6张 | 每次结算 **转轮盘**: (+/-/×) × (1/3/5/9) |

**赌博系神牌：**
| 稀有度 | 名称 | 效果 | 价格 |
|--------|------|------|------|
| 🟢绿 | 赌运初开 | 出牌时 20% 概率额外选一张花牌 | 8💰 |
| 🟢绿 | 浑水摸鱼 | 弃牌摸牌时 20% 概率多摸2张再选 | 9💰 |
| 🟢绿 | 细水长流 | 使用花牌时 20% 概率不消耗 | 10💰 |
| 🔵蓝 | 豪赌一番 | 结算时 50% 得分+30%，失败-10% | 18💰 |
| 🔵蓝 | 财运亨通 | 回合结束 50% +15金币，失败-5金币 | 20💰 |
| 🟣紫 | 孤注一掷 | 胡牌时 75% 得分×神牌数，失败-50%金币 | 35💰 |
| 🟡金 | 概率之骰 | 所有概率变 100%（集齐其他6张赌博神牌自动获得） | — |

#### 👁️ 洞察羁绊 — 看牌与预知

| 等级 | 名称 | 所需 | 效果 |
|------|------|------|------|
| Lv.1 | 读心者 | 2张 | 每次出牌后，牌堆顶 **2张** 变明牌 |
| Lv.2 | 操纵师 | 4张 | 每局1次，弃牌时可从 **明牌中选摸**（限3张） |
| Lv.3 | 空想家 | 6张 | 牌堆 **全部变明牌** |

**洞察系神牌：**
| 稀有度 | 名称 | 效果 | 价格 |
|--------|------|------|------|
| 🟢绿 | 千里眼 | 游戏开始时，牌堆顶 5张 变明牌 | 8💰 |
| 🟢绿 | 顺风耳 | 每次摸牌后，下一张自动变明牌 | 9💰 |
| 🟢绿 | 灵光一闪 | 抽花牌时，额外多看 1张 再选 | 7💰 |
| 🔵蓝 | 乾坤手 | 每回合可将 1张明牌 移到牌堆顶 | 18💰 |
| 🔵蓝 | 洗牌圣手 | 每回合1次，明牌洗入牌堆并重抽同等数量 | 16💰 |
| 🟣紫 | 拾遗者 | 每局1次，弃牌时可从 已弃牌堆 中换牌 | 32💰 |
| 🟡金 | 命运编织 | 开局可将 2张手牌 替换成牌堆任意牌 | 55💰 |

#### 💰 财运羁绊 — 金币转倍率

| 等级 | 名称 | 所需 | 效果 |
|------|------|------|------|
| Lv.1 | 财源广进 | 2张 | 胡牌时，每 50金币 → +1倍率 |
| Lv.2 | 点石成金 | 4张 | 胡牌时，每 30金币 → +1倍率 |
| Lv.3 | 富可敌国 | 6张 | 胡牌时，每 20金币 → ×1.5倍率 |

**财运系神牌：**
| 稀有度 | 名称 | 效果 | 价格 |
|--------|------|------|------|
| 🟢绿 | 招财猫 | 每次吃/碰/杠获得 +8金币 | 7💰 |
| 🟢绿 | 聚宝盆 | 回合结束时，获得 当前金币10% 的额外金币 | 9💰 |
| 🟢绿 | 金蟾 | 弃牌时，每弃1张 +3金币 | 8💰 |
| 🔵蓝 | 摇钱树 | 每持有1张花牌，回合结束 +5金币 | 18💰 |
| 🔵蓝 | 貔貅 | 所有金币获取 +50%，但无法在商店卖牌 | 22💰 |
| 🟣紫 | 财神 | 每回合开始 +15金币，胡牌时金币奖励 ×1.5 | 38💰 |
| 🟡金 | 福禄寿 | 金币上限提升至 999，超过200金币时所有倍率 ×2 | 60💰 |

#### 🔄 转化羁绊 — 材质强化

| 等级 | 名称 | 所需 | 效果 |
|------|------|------|------|
| Lv.1 | 偷天换日 | 2张 | 胡牌时，每张材质牌 → +1倍率 |
| Lv.2 | 造物主 | 4张 | 材质碎裂概率 减半，每张材质牌 → +2倍率 |
| Lv.3 | 万象归一 | 6张 | 材质 不会碎裂，每张材质牌 → ×1.5倍率 |

> 💡 材质牌 = 拥有材质的麻将牌（参与胡牌的才计算）

**转化系神牌：** (每局游戏开始时自动触发)
| 稀有度 | 名称 | 效果 | 价格 |
|--------|------|------|------|
| 🟢绿 | 镀铜匠 | 每局开始时，随机 3张牌 变成铜牌 | 6💰 |
| 🟢绿 | 冰封师 | 每局开始时，随机 2张牌 变成冰牌 | 8💰 |
| 🟢绿 | 竹编匠 | 每局开始时，随机 3张牌 变成竹牌 | 5💰 |
| 🔵蓝 | 银匠 | 每局开始时，随机 2张牌 变成银牌 | 15💰 |
| 🔵蓝 | 玻璃工 | 每局开始时，随机 1张牌 变成玻璃牌 | 18💰 |
| 🟣紫 | 点石成金 | 每局开始时，所有铜/银牌 变成金牌 | 32💰 |
| 🟣紫 | 琉璃匠 | 每局开始时，随机 1张牌 变成琉璃牌 | 38💰 |
| 🟡金 | 点石成玉 | 每局开始时，所有铜/银牌 升级为玉牌 | 55💰 |

---

## 💎 材质系统（已确定）

### 概述
- 材质是牌面的增强状态
- 每张牌只能拥有一种材质
- **材质效果仅在胡牌时生效**（参与胡牌的牌才计算）

### 材质列表

| 材质 | 稀有度 | 效果 | 特殊 |
|------|--------|------|------|
| 🥉 铜牌 | 普通 | +5 筹码 | — |
| 🥈 银牌 | 稀有 | +15 筹码 | — |
| 🥇 金牌 | 史诗 | +20 筹码, +2 倍率 | — |
| 🎋 竹牌 | 普通 | 被弃时 +5 金币 | — |
| 🧊 冰牌 | 稀有 | +50 筹码 | 3回合后融化 |
| 🫧 玻璃牌 | 稀有 | ×2 倍率 | 胡牌后 25% 碎裂消失 |
| 🔮 琉璃牌 | 史诗 | ×3 倍率 | 胡牌后 25% 碎裂 → 玻璃牌 |
| 🍀 玉牌 | 史诗 | +10 筹码 | 20% 触发额外 +1 倍率 |
| 🏺 瓷牌 | 传说 | 万能字牌 | 只能作用于字牌，可作为任意字牌 |
| 💎 翡翠牌 | 传说 | 万能数字 | 只能作用于数牌，可作为任意数字（花色不变） |

### 材质降级链

```
🔮 琉璃牌 (×3) → [25%碎] → 🫧 玻璃牌 (×2) → [25%碎] → 💨 消失
```

### 获取方式
- ☀️ 夏季牌 — 可以将普通牌升级为材质
- 🔄 转化神牌 — 每局开始时自动为牌加材质
- 🏪 商店 — 购买材质升级道具

### 规则
1. **单一材质**: 每张牌只能有1种材质
2. **可覆盖**: 新材质会覆盖旧材质
3. **胡牌生效**: 材质效果仅在胡牌时计算
4. **结算后碎裂**: 碎裂判定在胡牌结算后进行

---

## 🏪 商店系统

- **回合间商店**: 每回合结束后进入商店
- **购买神牌**: 随机3-5张神牌可选
- **刷新商店**: 花费金币重新随机
- **卖出神牌**: 获得购买价50%金币

---

## 📝 开发优先级

### Phase 1 — 基础玩法 ✅ 完成
- [x] 14张起手牌
- [x] 弃牌系统 (5次)
- [x] 出牌系统 (吃/碰/杠)
- [x] 花牌选择 (2/3/5选1)
- [x] 胡牌按钮
- [x] 基础UI

### Phase 2 — 神牌系统 🚧 进行中
- [ ] 神牌数据结构 (GodTile interface)
- [ ] 28张神牌定义 (4羁绊 × 7张)
- [ ] 羁绊系统 (2/4/6层效果)
- [ ] 神牌被动效果触发
- [ ] 商店集成

### Phase 3 — 材质系统
- [ ] 材质数据结构 (Material interface)
- [ ] 10种材质定义
- [ ] 材质效果 (筹码/倍率加成)
- [ ] 碎裂/降级系统
- [ ] 材质UI显示

### Phase 4 — 经济系统
- [ ] 金币系统
- [ ] 得分计算公式
- [ ] 难度曲线 (8回合)
- [ ] 商店完整功能

---

*此文档为游戏设计的唯一真实来源，所有开发必须严格遵照此文档。*
